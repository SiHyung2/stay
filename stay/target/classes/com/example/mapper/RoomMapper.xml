<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
 <mapper namespace="com.example.mapper.RoomMapper">

 
 
 	<select id="getList" resultType="com.example.domain.RoomDTO">
 		select * from room where room_num>0
 	</select>
 	
	<!-- 객실 등록 -->
 	<insert id="insertroom">
		INSERT INTO 
			room (room_num, ac_id, ro_name, ro_basic_count, ro_max_count, ro_info, ro_count)
		VALUES 
			(#{room_num}, #{ac_id}, #{ro_name}, #{ro_basic_count}, #{ro_max_count}, #{ro_info}, #{ro_count})
 	</insert>
 	

	<update id="updateroom">
		update
 			room
 		set
 			ac_id=#{ac_id}, ro_name=#{ro_name}, ro_basic_count=#{ro_basic_count}, 
 			ro_max_count=#{ro_max_count}, ro_info=#{ro_info}, ro_count=#{ro_count}
 		where
 			room_num=#{room_num}
 	</update>
	
	
	<delete id="deleteroom">
		delete room where room_num=#{room_num}
 	</delete>
 	
 	
 	<!-- 숙소 목록페이지에서 숙소를 클릭했을 때 숙소의 모든 방을 보여준다(숙소 상세페이지) -->
	<select id="searchByac_id" resultType="com.example.domain.RoomDTO">
        select * from room
        where
        	ac_id =#{ac_id}
    </select>
    
    <!-- 숙소 상세페이지에서 방을 클릭했을 때 특정 방 1개를 보여준다(방 상세페이지) -->
    <select id="searchByac_id_And_room_num" resultType="com.example.domain.RoomDTO">
        select * from room
        where
        	ac_id =#{ac_id} and room_num=#{room_num}
    </select>
    
<!--     <select id="room_detail_detail" resultType="com.example.domain.Room_detailDTO"> -->
<!--         SELECT a.ac_title, r.ro_name, r.room_price,  -->
<!-- 		        TO_CHAR(a.checkin, 'HH24:MI') AS checkin_string,  -->
<!-- 		        TO_CHAR(a.checkout, 'HH24:MI') AS checkout_string -->
<!-- 		FROM accommodation a -->
<!-- 		LEFT JOIN room r ON a.ac_id = r.ac_id -->
<!-- 		WHERE a.ac_id=#{ac_id}; -->
<!--     </select> -->
    
    
    
 </mapper>
 
 
 
 
 